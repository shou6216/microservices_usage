# 4. 移行計画

## 4.1. マイクロサービスを選択する理由

* 市場投入までの時間を減らす
* 高負荷のサービスだけスケールアップし、逆に必要のないサービスはスケールダウンできる
* 堅牢性の改善（機能のある領域に影響を与えても、システム全体をダウンさせる必要はない）
* 新しい技術を受け入れやすい

## 4.2. マイクロサービスが向かないケース

* ドメインが不明瞭
    *  サービス境界の判断が難しい
* スタートアップ
    * ドメインが不明瞭と同じ
* 顧客の環境にインストールして管理するもの

**一度モノリスで作り、サービス境界及びドメインを明確にしてからとマイクロサービス化するのが適切**

## 4.3. モノリスからマイクロへ移行の方針

* 少しずつ、段階的に分解しながら進める
* アジャイルの思想に近い。小さなイテレーションを繰り返す
* 小さく分解することで、その分解によって生まれる様々な問題やコストも小さくすることが狙い
* 分解には、 **ドメイン駆動設計**

## 4.4. ドメイン駆動設計

* サービスの境界を定義
* サービス間の関連を可視化する
* **イベントストーミング** の実施
* 関連（依存）が多いサービスは、関連元の変更も多くなるため、移行コストが大きい
* 一方で、関連（依存）が少ないまたは全くないサービスは、移行コストが低い

## 4.5. 分解の優先順位

* **分解のしやすさ** と **分解による利益** の2軸で考える
* どちらも高いものから順々に進める

## 4.6. チームの編成

* アーキテクチャと同様に、チームのサイロ化も変える必要がある
    * 設計、製造、テスト、運用など工程ごとチームを分けることで、単純な変更でも変更量や作業時間が多くなりがち
* 1つのチーム内で、上記メンバを構成することで、変更量や時間を減らし自律的な活動ができる
    * マイクロサービスやDevOpsの思想
* 運用状況のAS-ISとTO-BEを整理する 
