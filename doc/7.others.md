# 7. その他

## 7.1. 破壊的変更

### 概要

* マイクロサービスの利用側に影響を与えないようにする必要がある
* 影響ないと思ってがっつり変えて本番環境にデプロイしたら、多機能に影響出たとか最悪
    *  もともとパラメータ2つだったけど、3つにした
    *  返すデータ構造を変えた
* マイクロサービスやチームの数が増えれば増えるほど、この問題は顕在化する

### 対策

* テストを頻繁に行うことが最良の検出方法
* 変更を加えたら（検出したら）関係者に素早く周知すること
* そもそも破壊的変更で環なく、拡張する形に変更ができないか検討
* 変更前後のマイクロサービスを同時稼働させる
   * 変更後のデプロイ環境追加、変更前後の利用データ互換性など意識すべきことが増えて結構負担
* 1つのマイクロサービス内で互換性を持たせる
   * マイクロサービス内に変更前後のAPIを両方持つ

## 7.2 監視

* ログや監視は、モノリスに比べて見るべきプロセスが増える
* どちらにせよ、1つのサービスに集約することが望ましい（ログ収集マイクロサービスなど）
   * 各マイクロサービスを利用する際にゲートウェイ的なものを通せば、収集が可能

## 7.3. 開発方法

### 概要

* マイクロサービスいっぱいあると、開発対象のサービスを作るためにいくつかのマイクロサービスが必要
* 所有する開発PCで全部起動できなくなる

### 対策

* スタブ化する
* 別サーバで立てたサービスを利用する
* **Telepresence** ってのがうまい具合にマイクロサービスを管理してくれるっぽい
* 本番環境では、 **Kubertetes** など使って管理するのが良い
